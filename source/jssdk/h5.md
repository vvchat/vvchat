title: 企云信文档
---

## 授权


> 方法名

auth

> 参数

| 参数   |      类型      |  参考值 | 说明 |
|----------|:-------------:|------:|------:|
| app_id   |  string       | test| 平台发放的appid|
| scope |    string   |   snsapi_userinfo| 权限 snsapi_userinfo(获取用户信息),sessionapi_sendmsg（获取会话发送消息权限） |

> 成功返回

| 参数   |      类型      |  参考值 | 说明 |
|----------|:-------------:|------:|------:|
| code   |  string       | xxxxx| 授权码（调用**获取访问凭证API**可以获取到对应的token）|


## 获取当前会话信息

当前h5在会话里被打开，此接口能获取到当前会话信息

> 方法名

getSession

> 参数

无

> 成功返回

| 参数   |      类型      |  参考值 | 说明 |
|----------|:-------------:|------:|------:|
| session_id   |  string       | IqxDpc-s6S_9RaXMmag39YVH7W810Z57| 会话唯一标示|
| session_type   |  int       | 2 | 会话类型： 1.单聊 2.群聊|

## 获取选中的会话信息

调用此方法将弹出会话选择列表，用户选择了某个会话确认后，将获取到此会话的信息

> 方法名

getSession

> 参数

无

> 成功返回

| 参数   |      类型      |  参考值 | 说明 |
|----------|:-------------:|------:|------:|
| session_id   |  string       | IqxDpc-s6S_9RaXMmag39YVH7W810Z57| 会话唯一标示|
| session_type   |  int       | 2 | 会话类型： 1.单聊 2.群聊|

## 获取会话的授权码
弹出授权页面，用户确认授权后将获取到授权码

> 方法名

auth

> 参数

| 参数   |      类型      |  参考值 | 说明 |
|----------|:-------------:|------:|------:|
| app_id   |  string       | test| 平台发放的appid|
| scope |    string   |   sessionapi_sendmsg:SESSION_ID:SESSION_TYPE| SESSION_ID和SESSION_TYPE为返回的会话信息 |

> 成功返回

| 参数   |      类型      |  参考值 | 说明 |
|----------|:-------------:|------:|------:|
| code   |  string       | xxxxx| 授权码（调用**获取访问凭证API**可以获取到对应的token）|

## 支付

弹出支付付款页面，用户支付成功后回调成功方法

> 方法名

pay

> 参数

| 参数   |      类型      |  参考值 | 说明 |
|----------|:-------------:|------:|------:|
| imprest_code   |  string       | xxxxxxx| 预付款编号 |

> 成功返回

| 参数   |      类型      |  参考值 | 说明 |
|----------|:-------------:|------:|------:|
| trade_no   |  string       | xxxxx | 交易编号 |
